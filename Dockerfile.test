FROM mhart/alpine-node:latest

ARG MONGODB_USERNAME
ENV MONGODB_USERNAME=$MONGODB_USERNAME

ARG MONGODB_PASSWORD
ENV MONGODB_PASSWORD=$MONGODB_PASSWORD

ARG MONGODB_DATABASE
ENV MONGODB_DATABASE=$MONGODB_DATABASE

ARG UNISTATS_AUTH
ENV UNISTATS_AUTH=$UNISTATS_AUTH

ENV NODE_ENV development

WORKDIR /src

COPY package.json .
RUN npm i

COPY . .

EXPOSE 3000

CMD ["npm", "run", "ci"]
